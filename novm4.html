submitButton.onclick = function () {
    const userName = document.getElementById("userName").value;
    const userEmail = document.getElementById("userEmail").value;

    if (!userName || !userEmail) {
        alert("Please enter your name and email.");
        return;
    }
    if (drawnPoints.length === 0) {
        alert("No points to submit!");
        return;
    }

    const featureLayer = new FeatureLayer({
        url: "https://services5.arcgis.com/aGI9Mx1pvNKY7ehV/arcgis/rest/services/MapleTrees/FeatureServer"
    });

    const features = drawnPoints.map(point => {
        return new Graphic({
            geometry: point.geometry,
            attributes: {
                esrignss_latitude: point.Latitude,  // Match field name for latitude
                esrignss_longitude: point.Longitude, // Match field name for longitude
                userName: userName,
                userEmail: userEmail
            }
        });
    });

    featureLayer.applyEdits({ addFeatures: features })
        .then(response => {
            console.log("Points submitted successfully!", response);
            drawnPoints.length = 0;
            graphicsLayer.removeAll();

            alert(`Thank you, ${userName}, for your planting map submission. We will contact you at ${userEmail} about the status of your application within a week or two.`);
        })
        .catch(error => console.error("Error submitting points:", error));
};
